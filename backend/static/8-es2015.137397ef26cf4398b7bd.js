(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Xdgr:function(t,e,i){"use strict";i.r(e),i.d(e,"UsersPageModule",function(){return et});var a=i("tyNb"),n=i("jtHE"),o=i("1G5W"),s=i("Tj/N"),c=i("0IaG"),r=i("XNiG"),l=i("Lrq1"),b=i("fXoL"),d=i("bTqV"),u=i("ofXK");function m(t,e){1&t&&(b.Tb(0,"span"),b.zc(1,"Processing..."),b.Sb())}function g(t,e){1&t&&(b.Tb(0,"span"),b.zc(1,"Register"),b.Sb())}function h(t,e){1&t&&(b.Tb(0,"span"),b.zc(1,"Update"),b.Sb())}function f(t,e){if(1&t&&(b.Tb(0,"span"),b.yc(1,g,2,0,"span",5),b.yc(2,h,2,0,"span",5),b.Sb()),2&t){const t=b.ec();b.Cb(1),b.kc("ngIf",!t.data),b.Cb(1),b.kc("ngIf",t.data)}}let p=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.submit=new r.a,this.formStatus=l.a}submitForm(){this.submit.next()}resultForm(t){this.result=t,this.result.status===l.a.OK&&this.onClose(t)}onClose(t){this.dialogRef.close(t)}get loading(){var t;return(null===(t=this.result)||void 0===t?void 0:t.status)===this.formStatus.SENDING}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(c.g),b.Nb(c.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["nat-user-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"submit","user","result"],[1,"actions"],["mat-flat-button","","color","accent",3,"disabled","click"],[4,"ngIf"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,e){1&t&&(b.Tb(0,"h2",0),b.zc(1,"User"),b.Sb(),b.Tb(2,"mat-dialog-content",1),b.Tb(3,"user-registration",2),b.ac("result",function(t){return e.resultForm(t)}),b.Sb(),b.Sb(),b.Tb(4,"mat-dialog-actions",3),b.Tb(5,"button",4),b.ac("click",function(){return e.submitForm()}),b.yc(6,m,2,0,"span",5),b.yc(7,f,3,2,"span",5),b.Sb(),b.Tb(8,"button",6),b.zc(9,"Close"),b.Sb(),b.Sb()),2&t&&(b.Cb(3),b.kc("submit",e.submit)("user",e.data),b.Cb(2),b.kc("disabled",e.loading),b.Cb(1),b.kc("ngIf",e.loading),b.Cb(1),b.kc("ngIf",!e.loading))},directives:[c.h,c.e,l.b,c.c,d.a,u.l,c.d],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:24px}"]}),t})();var C=i("tLlE"),y=i("OaWH"),S=i("Xa2L");const w=["*"];let T=(()=>{class t{constructor(){this.diameter=30,this.width="auto",this.loading=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Hb({type:t,selectors:[["loading"]],inputs:{diameter:"diameter",width:"width",loading:"loading"},ngContentSelectors:w,decls:5,vars:5,consts:[[1,"loading"],[1,"loading__cover"],[3,"diameter"]],template:function(t,e){1&t&&(b.jc(),b.Tb(0,"div",0),b.Tb(1,"div",1),b.Ob(2,"mat-spinner",2),b.Sb(),b.Tb(3,"div"),b.ic(4),b.Sb(),b.Sb()),2&t&&(b.vc("width",e.width),b.Cb(1),b.vc("visibility",e.loading?"visible":"hidden"),b.Cb(1),b.kc("diameter",e.diameter))},directives:[S.b],styles:[".loading[_ngcontent-%COMP%]{position:relative}.loading__cover[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:hsla(0,0%,100%,.6);z-index:1;display:flex;justify-content:center;align-items:center}"]}),t})();var D=i("+0xr"),_=i("Dh3D"),z=i("M9IT"),k=i("NFeN");function v(t,e){1&t&&(b.Tb(0,"th",21),b.zc(1,"No."),b.Sb())}function O(t,e){if(1&t&&(b.Tb(0,"td",22),b.zc(1),b.Sb()),2&t){const t=e.$implicit;b.Cb(1),b.Ac(t.id)}}function N(t,e){1&t&&(b.Tb(0,"th",21),b.zc(1,"First Name"),b.Sb())}function x(t,e){if(1&t&&(b.Tb(0,"td",22),b.zc(1),b.Sb()),2&t){const t=e.$implicit;b.Cb(1),b.Ac(t.firstName)}}function R(t,e){1&t&&(b.Tb(0,"th",21),b.zc(1,"Last Name"),b.Sb())}function P(t,e){if(1&t&&(b.Tb(0,"td",22),b.zc(1),b.Sb()),2&t){const t=e.$implicit;b.Cb(1),b.Ac(t.lastName)}}function U(t,e){1&t&&(b.Tb(0,"th",21),b.zc(1,"Username"),b.Sb())}function j(t,e){if(1&t&&(b.Tb(0,"td",22),b.zc(1),b.Sb()),2&t){const t=e.$implicit;b.Cb(1),b.Ac(t.username)}}function M(t,e){1&t&&(b.Tb(0,"th",23),b.zc(1,"Email"),b.Sb())}function F(t,e){if(1&t&&(b.Tb(0,"td",22),b.zc(1),b.Sb()),2&t){const t=e.$implicit;b.Cb(1),b.Ac(t.email)}}function I(t,e){1&t&&(b.Tb(0,"th",21),b.zc(1,"Birth Date"),b.Sb())}function $(t,e){if(1&t&&(b.Tb(0,"td",22),b.zc(1),b.fc(2,"date"),b.Sb()),2&t){const t=e.$implicit;b.Cb(1),b.Ac(b.hc(2,1,t.birthDate,"mediumDate"))}}function H(t,e){1&t&&b.Ob(0,"th",24)}function L(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",22),b.Tb(1,"button",25),b.ac("click",function(){b.sc(t);const i=e.$implicit;return b.ec().openEditUserDialog(i)}),b.Tb(2,"mat-icon"),b.zc(3,"edit"),b.Sb(),b.Sb(),b.Sb()}}function A(t,e){if(1&t&&(b.Tb(0,"td",26),b.zc(1,"No data"),b.Sb()),2&t){const t=b.ec();b.Db("colspan",t.displayedColumns.length)}}function K(t,e){1&t&&b.Ob(0,"tr",27)}function Q(t,e){1&t&&b.Ob(0,"tr",28)}function E(t,e){if(1&t&&b.Ob(0,"tr",29),2&t){const t=b.ec();b.Fb("hidden",t.users.length>0)}}const X=function(){return["no-data"]},G=function(){return[5,10,25]},W={width:"calc(100% - 32px)",maxWidth:"500px"},q=[{path:"",component:(()=>{class t{constructor(t,e,i){this.http=t,this.app=e,this.dialog=i,this.destroyed$=new n.a(1),this.users=[],this.loading=!1,this.dialogConfig=W,this.pagination={length:0,pageSize:10,pageIndex:0},this.sort={direction:"asc",active:"id"}}get mobile(){return this.width<=960}get displayedColumns(){return this.mobile?["id","firstName","lastName","edit"]:["id","username","firstName","lastName","email","birthDate","edit"]}ngOnInit(){this.app.width.pipe(Object(o.a)(this.destroyed$)).subscribe(t=>this.width=t),this.getUsers()}openCreateUserDialog(){this.dialog.open(p,this.dialogConfig).afterClosed().subscribe(t=>{t&&t.status===l.a.OK&&this.getUsers()})}openEditUserDialog(t){this.dialog.open(p,Object.assign(Object.assign({},this.dialogConfig),{data:new s.a(t)})).afterClosed().subscribe(t=>{t&&t.status===l.a.OK&&this.getUsers()})}getUsers(){this.loading=!0;const t=Object.assign({size:this.pagination.pageSize,page:this.pagination.pageIndex+1},this.sort.direction&&{sort:this.sort.active+","+this.sort.direction});this.http.find("users",t).subscribe(t=>{setTimeout(()=>{this.users=s.a.initArray(t.body),this.pagination.length=+t.headers.get("x-total-count"),this.loading=!1},200)},()=>{this.loading=!1})}changePage(t){this.pagination=t,this.getUsers()}changeSort(t){this.sort=t,this.getUsers()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(C.a),b.Nb(y.a),b.Nb(c.b))},t.\u0275cmp=b.Hb({type:t,selectors:[["nat-users-page"]],decls:32,vars:12,consts:[[1,"button-block"],["mat-raised-button","","color","primary",3,"click"],[3,"loading"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc",1,"users-table","mat-elevation-z1",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","username"],["matColumnDef","email"],["mat-header-cell","","mat-sort-header","","class","users-grid__email",4,"matHeaderCellDef"],["matColumnDef","birthDate"],["matColumnDef","edit"],["mat-header-cell","","class","users-table__edit-header",4,"matHeaderCellDef"],["matColumnDef","no-data"],["mat-footer-cell","","class","users-table__no-data",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],[1,"pagination-block","mat-elevation-z1",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"users-grid__email"],["mat-header-cell","",1,"users-table__edit-header"],["mat-icon-button","","color","accent",3,"click"],["mat-footer-cell","",1,"users-table__no-data"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"button",1),b.ac("click",function(){return e.openCreateUserDialog()}),b.zc(2,"Create user"),b.Sb(),b.Sb(),b.Tb(3,"loading",2),b.Tb(4,"table",3),b.ac("matSortChange",function(t){return e.changeSort(t)}),b.Rb(5,4),b.yc(6,v,2,0,"th",5),b.yc(7,O,2,1,"td",6),b.Qb(),b.Rb(8,7),b.yc(9,N,2,0,"th",5),b.yc(10,x,2,1,"td",6),b.Qb(),b.Rb(11,8),b.yc(12,R,2,0,"th",5),b.yc(13,P,2,1,"td",6),b.Qb(),b.Rb(14,9),b.yc(15,U,2,0,"th",5),b.yc(16,j,2,1,"td",6),b.Qb(),b.Rb(17,10),b.yc(18,M,2,0,"th",11),b.yc(19,F,2,1,"td",6),b.Qb(),b.Rb(20,12),b.yc(21,I,2,0,"th",5),b.yc(22,$,3,4,"td",6),b.Qb(),b.Rb(23,13),b.yc(24,H,1,0,"th",14),b.yc(25,L,4,0,"td",6),b.Qb(),b.Rb(26,15),b.yc(27,A,2,1,"td",16),b.Qb(),b.yc(28,K,1,0,"tr",17),b.yc(29,Q,1,0,"tr",18),b.yc(30,E,1,2,"tr",19),b.Sb(),b.Sb(),b.Tb(31,"mat-paginator",20),b.ac("page",function(t){return e.changePage(t)}),b.Sb()),2&t&&(b.Cb(3),b.kc("loading",e.loading),b.Cb(1),b.kc("dataSource",e.users),b.Cb(24),b.kc("matHeaderRowDef",e.displayedColumns),b.Cb(1),b.kc("matRowDefColumns",e.displayedColumns),b.Cb(1),b.kc("matFooterRowDef",b.lc(10,X)),b.Cb(1),b.Fb("mobile",e.mobile),b.kc("length",e.pagination.length)("pageSize",e.pagination.pageSize)("pageSizeOptions",b.lc(11,G)))},directives:[d.a,T,D.n,_.a,D.c,D.i,D.b,D.e,D.k,D.m,D.g,z.a,D.h,_.b,D.a,k.a,D.d,D.j,D.l,D.f],pipes:[u.e],styles:[".users-table[_ngcontent-%COMP%]{width:100%}.users-table__no-data[_ngcontent-%COMP%]{text-align:center}.users-table__edit-header[_ngcontent-%COMP%]{width:64px}.button-block[_ngcontent-%COMP%]{margin-bottom:1rem}.button-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:9px}.pagination-block[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid rgba(0,0,0,.12)}.pagination-block.mobile[_ngcontent-%COMP%]     .mat-paginator-page-size{display:none}.users-grid__email[_ngcontent-%COMP%]{width:200px}"]}),t})()}];let J=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[a.d.forChild(q)],a.d]}),t})();var V=i("PCNd"),B=i("5dmV"),Y=i("+2po");let Z=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[V.a,B.a,Y.a]]}),t})(),tt=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[V.a,B.a]]}),t})(),et=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[J,V.a,B.a,Z,tt]]}),t})()}}]);