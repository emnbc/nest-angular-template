(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Xdgr:function(t,e,i){"use strict";i.r(e),i.d(e,"UsersPageModule",(function(){return et}));var n=i("tyNb"),a=i("jtHE"),o=i("1G5W"),s=i("Tj/N"),c=i("0IaG"),r=i("XNiG"),l=i("Lrq1"),b=i("fXoL"),d=i("bTqV"),m=i("ofXK");function u(t,e){1&t&&(b.Ub(0,"span"),b.Bc(1,"Processing..."),b.Tb())}function g(t,e){1&t&&(b.Ub(0,"span"),b.Bc(1,"Register"),b.Tb())}function h(t,e){1&t&&(b.Ub(0,"span"),b.Bc(1,"Update"),b.Tb())}function f(t,e){if(1&t&&(b.Ub(0,"span"),b.Ac(1,g,2,0,"span",5),b.Ac(2,h,2,0,"span",5),b.Tb()),2&t){const t=b.gc();b.Cb(1),b.mc("ngIf",!t.data),b.Cb(1),b.mc("ngIf",t.data)}}let p=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.submit=new r.a,this.formStatus=l.a}submitForm(){this.submit.next()}resultForm(t){this.result=t,this.result.status===l.a.OK&&this.onClose(t)}onClose(t){this.dialogRef.close(t)}get loading(){var t;return(null===(t=this.result)||void 0===t?void 0:t.status)===this.formStatus.SENDING}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(c.g),b.Ob(c.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["nat-user-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"submit","user","result"],[1,"actions"],["mat-flat-button","","color","accent",3,"disabled","click"],[4,"ngIf"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,e){1&t&&(b.Ub(0,"h2",0),b.Bc(1,"User"),b.Tb(),b.Ub(2,"mat-dialog-content",1),b.Ub(3,"user-registration",2),b.cc("result",(function(t){return e.resultForm(t)})),b.Tb(),b.Tb(),b.Ub(4,"mat-dialog-actions",3),b.Ub(5,"button",4),b.cc("click",(function(){return e.submitForm()})),b.Ac(6,u,2,0,"span",5),b.Ac(7,f,3,2,"span",5),b.Tb(),b.Ub(8,"button",6),b.Bc(9,"Close"),b.Tb(),b.Tb()),2&t&&(b.Cb(3),b.mc("submit",e.submit)("user",e.data),b.Cb(2),b.mc("disabled",e.loading),b.Cb(1),b.mc("ngIf",e.loading),b.Cb(1),b.mc("ngIf",!e.loading))},directives:[c.h,c.e,l.b,c.c,d.a,m.l,c.d],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:24px}"]}),t})();var C=i("tLlE"),U=i("OaWH"),w=i("Xa2L");const T=["*"];let y=(()=>{class t{constructor(){this.diameter=30,this.width="auto",this.loading=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Ib({type:t,selectors:[["loading"]],inputs:{diameter:"diameter",width:"width",loading:"loading"},ngContentSelectors:T,decls:5,vars:5,consts:[[1,"loading"],[1,"loading__cover"],[3,"diameter"]],template:function(t,e){1&t&&(b.lc(),b.Ub(0,"div",0),b.Ub(1,"div",1),b.Pb(2,"mat-spinner",2),b.Tb(),b.Ub(3,"div"),b.kc(4),b.Tb(),b.Tb()),2&t&&(b.zc("width",e.width),b.Cb(1),b.zc("visibility",e.loading?"visible":"hidden"),b.Cb(1),b.mc("diameter",e.diameter))},directives:[w.b],styles:[".loading[_ngcontent-%COMP%]{position:relative}.loading__cover[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:hsla(0,0%,100%,.6);z-index:1;display:flex;justify-content:center;align-items:center}"]}),t})();var D=i("+0xr"),_=i("Dh3D"),O=i("M9IT"),S=i("NFeN");function v(t,e){1&t&&(b.Ub(0,"th",21),b.Bc(1,"No."),b.Tb())}function A(t,e){if(1&t&&(b.Ub(0,"td",22),b.Bc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Cc(t.id)}}function P(t,e){1&t&&(b.Ub(0,"th",21),b.Bc(1,"First Name"),b.Tb())}function B(t,e){if(1&t&&(b.Ub(0,"td",22),b.Bc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Cc(t.firstName)}}function N(t,e){1&t&&(b.Ub(0,"th",21),b.Bc(1,"Last Name"),b.Tb())}function x(t,e){if(1&t&&(b.Ub(0,"td",22),b.Bc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Cc(t.lastName)}}function k(t,e){1&t&&(b.Ub(0,"th",21),b.Bc(1,"Username"),b.Tb())}function M(t,e){if(1&t&&(b.Ub(0,"td",22),b.Bc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Cc(t.username)}}function R(t,e){1&t&&(b.Ub(0,"th",23),b.Bc(1,"Email"),b.Tb())}function I(t,e){if(1&t&&(b.Ub(0,"td",22),b.Bc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Cc(t.email)}}function j(t,e){1&t&&(b.Ub(0,"th",21),b.Bc(1,"Birth Date"),b.Tb())}function z(t,e){if(1&t&&(b.Ub(0,"td",22),b.Bc(1),b.hc(2,"date"),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Cc(b.jc(2,1,t.birthDate,"mediumDate"))}}function F(t,e){1&t&&b.Pb(0,"th",24)}function $(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",22),b.Ub(1,"button",25),b.cc("click",(function(){b.uc(t);const i=e.$implicit;return b.gc().openEditUserDialog(i)})),b.Ub(2,"mat-icon"),b.Bc(3,"edit"),b.Tb(),b.Tb(),b.Tb()}}function L(t,e){if(1&t&&(b.Ub(0,"td",26),b.Bc(1,"No data"),b.Tb()),2&t){const t=b.gc();b.Db("colspan",t.displayedColumns.length)}}function H(t,e){1&t&&b.Pb(0,"tr",27)}function E(t,e){1&t&&b.Pb(0,"tr",28)}function X(t,e){if(1&t&&b.Pb(0,"tr",29),2&t){const t=b.gc();b.Fb("hidden",t.users.length>0)}}const G=function(){return["no-data"]},K=function(){return[5,10,25]},V={width:"calc(100% - 32px)",maxWidth:"500px"},W=[{path:"",component:(()=>{class t{constructor(t,e,i){this.http=t,this.app=e,this.dialog=i,this.destroyed$=new a.a(1),this.users=[],this.loading=!1,this.dialogConfig=V,this.pagination={length:0,pageSize:10,pageIndex:0},this.sort={direction:"asc",active:"id"}}get mobile(){return this.width<=960}get displayedColumns(){return this.mobile?["id","firstName","lastName","edit"]:["id","username","firstName","lastName","email","birthDate","edit"]}ngOnInit(){this.app.width.pipe(Object(o.a)(this.destroyed$)).subscribe(t=>this.width=t),this.getUsers()}openCreateUserDialog(){this.dialog.open(p,this.dialogConfig).afterClosed().subscribe(t=>{t&&t.status===l.a.OK&&this.getUsers()})}openEditUserDialog(t){this.dialog.open(p,Object.assign(Object.assign({},this.dialogConfig),{data:new s.a(t)})).afterClosed().subscribe(t=>{t&&t.status===l.a.OK&&this.getUsers()})}getUsers(){this.loading=!0;const t=Object.assign({size:this.pagination.pageSize,page:this.pagination.pageIndex+1},this.sort.direction&&{sort:this.sort.active+","+this.sort.direction});this.http.find("users",t).subscribe(t=>{setTimeout(()=>{this.users=s.a.initArray(t.body),this.pagination.length=+t.headers.get("x-total-count"),this.loading=!1},200)},()=>{this.loading=!1})}changePage(t){this.pagination=t,this.getUsers()}changeSort(t){this.sort=t,this.getUsers()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(C.a),b.Ob(U.a),b.Ob(c.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["nat-users-page"]],decls:32,vars:12,consts:[[1,"button-block"],["mat-raised-button","","color","primary",3,"click"],[3,"loading"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc",1,"users-table","mat-elevation-z1",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","username"],["matColumnDef","email"],["mat-header-cell","","mat-sort-header","","class","users-grid__email",4,"matHeaderCellDef"],["matColumnDef","birthDate"],["matColumnDef","edit"],["mat-header-cell","","class","users-table__edit-header",4,"matHeaderCellDef"],["matColumnDef","no-data"],["mat-footer-cell","","class","users-table__no-data",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],[1,"pagination-block","mat-elevation-z1",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"users-grid__email"],["mat-header-cell","",1,"users-table__edit-header"],["mat-icon-button","","color","accent",3,"click"],["mat-footer-cell","",1,"users-table__no-data"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"button",1),b.cc("click",(function(){return e.openCreateUserDialog()})),b.Bc(2,"Create user"),b.Tb(),b.Tb(),b.Ub(3,"loading",2),b.Ub(4,"table",3),b.cc("matSortChange",(function(t){return e.changeSort(t)})),b.Sb(5,4),b.Ac(6,v,2,0,"th",5),b.Ac(7,A,2,1,"td",6),b.Rb(),b.Sb(8,7),b.Ac(9,P,2,0,"th",5),b.Ac(10,B,2,1,"td",6),b.Rb(),b.Sb(11,8),b.Ac(12,N,2,0,"th",5),b.Ac(13,x,2,1,"td",6),b.Rb(),b.Sb(14,9),b.Ac(15,k,2,0,"th",5),b.Ac(16,M,2,1,"td",6),b.Rb(),b.Sb(17,10),b.Ac(18,R,2,0,"th",11),b.Ac(19,I,2,1,"td",6),b.Rb(),b.Sb(20,12),b.Ac(21,j,2,0,"th",5),b.Ac(22,z,3,4,"td",6),b.Rb(),b.Sb(23,13),b.Ac(24,F,1,0,"th",14),b.Ac(25,$,4,0,"td",6),b.Rb(),b.Sb(26,15),b.Ac(27,L,2,1,"td",16),b.Rb(),b.Ac(28,H,1,0,"tr",17),b.Ac(29,E,1,0,"tr",18),b.Ac(30,X,1,2,"tr",19),b.Tb(),b.Tb(),b.Ub(31,"mat-paginator",20),b.cc("page",(function(t){return e.changePage(t)})),b.Tb()),2&t&&(b.Cb(3),b.mc("loading",e.loading),b.Cb(1),b.mc("dataSource",e.users),b.Cb(24),b.mc("matHeaderRowDef",e.displayedColumns),b.Cb(1),b.mc("matRowDefColumns",e.displayedColumns),b.Cb(1),b.mc("matFooterRowDef",b.nc(10,G)),b.Cb(1),b.Fb("mobile",e.mobile),b.mc("length",e.pagination.length)("pageSize",e.pagination.pageSize)("pageSizeOptions",b.nc(11,K)))},directives:[d.a,y,D.n,_.a,D.c,D.i,D.b,D.e,D.k,D.m,D.g,O.a,D.h,_.b,D.a,S.a,D.d,D.j,D.l,D.f],pipes:[m.e],styles:[".users-table[_ngcontent-%COMP%]{width:100%}.users-table__no-data[_ngcontent-%COMP%]{text-align:center}.users-table__edit-header[_ngcontent-%COMP%]{width:64px}.button-block[_ngcontent-%COMP%]{margin-bottom:1rem}.button-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:9px}.pagination-block[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid rgba(0,0,0,.12)}.pagination-block.mobile[_ngcontent-%COMP%]     .mat-paginator-page-size{display:none}.users-grid__email[_ngcontent-%COMP%]{width:200px}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[n.d.forChild(W)],n.d]}),t})();var J=i("PCNd"),Q=i("5dmV"),Y=i("+2po");let Z=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[J.a,Q.a,Y.a]]}),t})(),tt=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[J.a,Q.a]]}),t})(),et=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[q,J.a,Q.a,Z,tt]]}),t})()}}]);