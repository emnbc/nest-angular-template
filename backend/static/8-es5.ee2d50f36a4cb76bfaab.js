!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Xdgr:function(e,i,a){"use strict";a.r(i),a.d(i,"UsersPageModule",function(){return ut});var o=a("tyNb"),c=a("mrSG"),s=a("jtHE"),r=a("1G5W"),l=a("Tj/N"),d=a("0IaG"),u=a("XNiG"),b=a("Lrq1"),m=a("fXoL"),f=a("bTqV"),h=a("ofXK");function g(t,e){1&t&&(m.Tb(0,"span"),m.zc(1,"Processing..."),m.Sb())}function p(t,e){1&t&&(m.Tb(0,"span"),m.zc(1,"Register"),m.Sb())}function y(t,e){1&t&&(m.Tb(0,"span"),m.zc(1,"Update"),m.Sb())}function C(t,e){if(1&t&&(m.Tb(0,"span"),m.yc(1,p,2,0,"span",5),m.yc(2,y,2,0,"span",5),m.Sb()),2&t){var n=m.ec();m.Cb(1),m.kc("ngIf",!n.data),m.Cb(1),m.kc("ngIf",n.data)}}var v,w,S=((v=function(){function e(n,i){t(this,e),this.dialogRef=n,this.data=i,this.submit=new u.a,this.formStatus=b.a}return n(e,[{key:"submitForm",value:function(){this.submit.next()}},{key:"resultForm",value:function(t){this.result=t,this.result.status===b.a.OK&&this.onClose(t)}},{key:"onClose",value:function(t){this.dialogRef.close(t)}},{key:"loading",get:function(){var t;return(null===(t=this.result)||void 0===t?void 0:t.status)===this.formStatus.SENDING}}]),e}()).\u0275fac=function(t){return new(t||v)(m.Nb(d.g),m.Nb(d.a))},v.\u0275cmp=m.Hb({type:v,selectors:[["nat-user-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"submit","user","result"],[1,"actions"],["mat-flat-button","","color","accent",3,"disabled","click"],[4,"ngIf"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,e){1&t&&(m.Tb(0,"h2",0),m.zc(1,"User"),m.Sb(),m.Tb(2,"mat-dialog-content",1),m.Tb(3,"user-registration",2),m.ac("result",function(t){return e.resultForm(t)}),m.Sb(),m.Sb(),m.Tb(4,"mat-dialog-actions",3),m.Tb(5,"button",4),m.ac("click",function(){return e.submitForm()}),m.yc(6,g,2,0,"span",5),m.yc(7,C,3,2,"span",5),m.Sb(),m.Tb(8,"button",6),m.zc(9,"Close"),m.Sb(),m.Sb()),2&t&&(m.Cb(3),m.kc("submit",e.submit)("user",e.data),m.Cb(2),m.kc("disabled",e.loading),m.Cb(1),m.kc("ngIf",e.loading),m.Cb(1),m.kc("ngIf",!e.loading))},directives:[d.h,d.e,b.b,d.c,f.a,h.l,d.d],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:24px}"]}),v),k=a("tLlE"),T=a("OaWH"),D=a("Xa2L"),_=["*"],z=((w=function e(){t(this,e),this.diameter=30,this.width="auto",this.loading=!0}).\u0275fac=function(t){return new(t||w)},w.\u0275cmp=m.Hb({type:w,selectors:[["loading"]],inputs:{diameter:"diameter",width:"width",loading:"loading"},ngContentSelectors:_,decls:5,vars:5,consts:[[1,"loading"],[1,"loading__cover"],[3,"diameter"]],template:function(t,e){1&t&&(m.jc(),m.Tb(0,"div",0),m.Tb(1,"div",1),m.Ob(2,"mat-spinner",2),m.Sb(),m.Tb(3,"div"),m.ic(4),m.Sb(),m.Sb()),2&t&&(m.vc("width",e.width),m.Cb(1),m.vc("visibility",e.loading?"visible":"hidden"),m.Cb(1),m.kc("diameter",e.diameter))},directives:[D.b],styles:[".loading[_ngcontent-%COMP%]{position:relative}.loading__cover[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:hsla(0,0%,100%,.6);z-index:1;display:flex;justify-content:center;align-items:center}"]}),w),O=a("+0xr"),N=a("Dh3D"),R=a("M9IT"),U=a("NFeN");function x(t,e){1&t&&(m.Tb(0,"th",21),m.zc(1,"No."),m.Sb())}function j(t,e){if(1&t&&(m.Tb(0,"td",22),m.zc(1),m.Sb()),2&t){var n=e.$implicit;m.Cb(1),m.Ac(n.id)}}function P(t,e){1&t&&(m.Tb(0,"th",21),m.zc(1,"First Name"),m.Sb())}function L(t,e){if(1&t&&(m.Tb(0,"td",22),m.zc(1),m.Sb()),2&t){var n=e.$implicit;m.Cb(1),m.Ac(n.firstName)}}function M(t,e){1&t&&(m.Tb(0,"th",21),m.zc(1,"Last Name"),m.Sb())}function F(t,e){if(1&t&&(m.Tb(0,"td",22),m.zc(1),m.Sb()),2&t){var n=e.$implicit;m.Cb(1),m.Ac(n.lastName)}}function I(t,e){1&t&&(m.Tb(0,"th",21),m.zc(1,"Username"),m.Sb())}function $(t,e){if(1&t&&(m.Tb(0,"td",22),m.zc(1),m.Sb()),2&t){var n=e.$implicit;m.Cb(1),m.Ac(n.username)}}function H(t,e){1&t&&(m.Tb(0,"th",23),m.zc(1,"Email"),m.Sb())}function A(t,e){if(1&t&&(m.Tb(0,"td",22),m.zc(1),m.Sb()),2&t){var n=e.$implicit;m.Cb(1),m.Ac(n.email)}}function E(t,e){1&t&&(m.Tb(0,"th",21),m.zc(1,"Birth Date"),m.Sb())}function K(t,e){if(1&t&&(m.Tb(0,"td",22),m.zc(1),m.fc(2,"date"),m.Sb()),2&t){var n=e.$implicit;m.Cb(1),m.Ac(m.hc(2,1,n.birthDate,"mediumDate"))}}function Q(t,e){1&t&&m.Ob(0,"th",24)}function G(t,e){if(1&t){var n=m.Ub();m.Tb(0,"td",22),m.Tb(1,"button",25),m.ac("click",function(){m.sc(n);var t=e.$implicit;return m.ec().openEditUserDialog(t)}),m.Tb(2,"mat-icon"),m.zc(3,"edit"),m.Sb(),m.Sb(),m.Sb()}}function X(t,e){if(1&t&&(m.Tb(0,"td",26),m.zc(1,"No data"),m.Sb()),2&t){var n=m.ec();m.Db("colspan",n.displayedColumns.length)}}function W(t,e){1&t&&m.Ob(0,"tr",27)}function q(t,e){1&t&&m.Ob(0,"tr",28)}function B(t,e){if(1&t&&m.Ob(0,"tr",29),2&t){var n=m.ec();m.Fb("hidden",n.users.length>0)}}var J,V,Y,Z,tt,et=function(){return["no-data"]},nt=function(){return[5,10,25]},it={width:"calc(100% - 32px)",maxWidth:"500px"},at=[{path:"",component:(J=function(){function e(n,i,a){t(this,e),this.http=n,this.app=i,this.dialog=a,this.destroyed$=new s.a(1),this.users=[],this.loading=!1,this.dialogConfig=it,this.pagination={length:0,pageSize:10,pageIndex:0},this.sort={direction:"asc",active:"id"}}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.app.width.pipe(Object(r.a)(this.destroyed$)).subscribe(function(e){return t.width=e}),this.getUsers()}},{key:"openCreateUserDialog",value:function(){var t=this;this.dialog.open(S,this.dialogConfig).afterClosed().subscribe(function(e){e&&e.status===b.a.OK&&t.getUsers()})}},{key:"openEditUserDialog",value:function(t){var e=this;this.dialog.open(S,Object.assign(Object.assign({},this.dialogConfig),{data:new l.a(t)})).afterClosed().subscribe(function(t){t&&t.status===b.a.OK&&e.getUsers()})}},{key:"getUsers",value:function(){var t=this;this.loading=!0;var e=Object.assign({size:this.pagination.pageSize,page:this.pagination.pageIndex+1},this.sort.direction&&{sort:this.sort.active+","+this.sort.direction});this.http.find("users",e).subscribe(function(e){setTimeout(function(){t.users=l.a.initArray(e.body),t.pagination.length=+e.headers.get("x-total-count"),t.loading=!1},200)},function(){t.loading=!1})}},{key:"changePage",value:function(t){this.pagination=t,this.getUsers()}},{key:"changeSort",value:function(t){this.sort=t,this.getUsers()}},{key:"downloadUsersList",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.http.download("users/download/run").subscribe(function(t){var e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.setAttribute("download","users"),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(n)});case 1:case"end":return t.stop()}},t,this)}))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(!0),this.destroyed$.complete()}},{key:"mobile",get:function(){return this.width<=960}},{key:"displayedColumns",get:function(){return this.mobile?["id","firstName","lastName","edit"]:["id","username","firstName","lastName","email","birthDate","edit"]}}]),e}(),J.\u0275fac=function(t){return new(t||J)(m.Nb(k.a),m.Nb(T.a),m.Nb(d.b))},J.\u0275cmp=m.Hb({type:J,selectors:[["nat-users-page"]],decls:34,vars:12,consts:[[1,"button-block"],["mat-raised-button","","color","primary",3,"click"],[3,"loading"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc",1,"users-table","mat-elevation-z1",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","username"],["matColumnDef","email"],["mat-header-cell","","mat-sort-header","","class","users-grid__email",4,"matHeaderCellDef"],["matColumnDef","birthDate"],["matColumnDef","edit"],["mat-header-cell","","class","users-table__edit-header",4,"matHeaderCellDef"],["matColumnDef","no-data"],["mat-footer-cell","","class","users-table__no-data",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],[1,"pagination-block","mat-elevation-z1",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"users-grid__email"],["mat-header-cell","",1,"users-table__edit-header"],["mat-icon-button","","color","accent",3,"click"],["mat-footer-cell","",1,"users-table__no-data"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"button",1),m.ac("click",function(){return e.openCreateUserDialog()}),m.zc(2,"Create user"),m.Sb(),m.Tb(3,"button",1),m.ac("click",function(){return e.downloadUsersList()}),m.zc(4,"Download Users List"),m.Sb(),m.Sb(),m.Tb(5,"loading",2),m.Tb(6,"table",3),m.ac("matSortChange",function(t){return e.changeSort(t)}),m.Rb(7,4),m.yc(8,x,2,0,"th",5),m.yc(9,j,2,1,"td",6),m.Qb(),m.Rb(10,7),m.yc(11,P,2,0,"th",5),m.yc(12,L,2,1,"td",6),m.Qb(),m.Rb(13,8),m.yc(14,M,2,0,"th",5),m.yc(15,F,2,1,"td",6),m.Qb(),m.Rb(16,9),m.yc(17,I,2,0,"th",5),m.yc(18,$,2,1,"td",6),m.Qb(),m.Rb(19,10),m.yc(20,H,2,0,"th",11),m.yc(21,A,2,1,"td",6),m.Qb(),m.Rb(22,12),m.yc(23,E,2,0,"th",5),m.yc(24,K,3,4,"td",6),m.Qb(),m.Rb(25,13),m.yc(26,Q,1,0,"th",14),m.yc(27,G,4,0,"td",6),m.Qb(),m.Rb(28,15),m.yc(29,X,2,1,"td",16),m.Qb(),m.yc(30,W,1,0,"tr",17),m.yc(31,q,1,0,"tr",18),m.yc(32,B,1,2,"tr",19),m.Sb(),m.Sb(),m.Tb(33,"mat-paginator",20),m.ac("page",function(t){return e.changePage(t)}),m.Sb()),2&t&&(m.Cb(5),m.kc("loading",e.loading),m.Cb(1),m.kc("dataSource",e.users),m.Cb(24),m.kc("matHeaderRowDef",e.displayedColumns),m.Cb(1),m.kc("matRowDefColumns",e.displayedColumns),m.Cb(1),m.kc("matFooterRowDef",m.lc(10,et)),m.Cb(1),m.Fb("mobile",e.mobile),m.kc("length",e.pagination.length)("pageSize",e.pagination.pageSize)("pageSizeOptions",m.lc(11,nt)))},directives:[f.a,z,O.n,N.a,O.c,O.i,O.b,O.e,O.k,O.m,O.g,R.a,O.h,N.b,O.a,U.a,O.d,O.j,O.l,O.f],pipes:[h.e],styles:[".users-table[_ngcontent-%COMP%]{width:100%}.users-table__no-data[_ngcontent-%COMP%]{text-align:center}.users-table__edit-header[_ngcontent-%COMP%]{width:64px}.button-block[_ngcontent-%COMP%]{margin-bottom:1rem}.button-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:9px}.pagination-block[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid rgba(0,0,0,.12)}.pagination-block.mobile[_ngcontent-%COMP%]     .mat-paginator-page-size{display:none}.users-grid__email[_ngcontent-%COMP%]{width:200px}"]}),J)}],ot=((V=function e(){t(this,e)}).\u0275mod=m.Lb({type:V}),V.\u0275inj=m.Kb({factory:function(t){return new(t||V)},imports:[[o.d.forChild(at)],o.d]}),V),ct=a("PCNd"),st=a("5dmV"),rt=a("+2po"),lt=((tt=function e(){t(this,e)}).\u0275mod=m.Lb({type:tt}),tt.\u0275inj=m.Kb({factory:function(t){return new(t||tt)},imports:[[ct.a,st.a,rt.a]]}),tt),dt=((Z=function e(){t(this,e)}).\u0275mod=m.Lb({type:Z}),Z.\u0275inj=m.Kb({factory:function(t){return new(t||Z)},imports:[[ct.a,st.a]]}),Z),ut=((Y=function e(){t(this,e)}).\u0275mod=m.Lb({type:Y}),Y.\u0275inj=m.Kb({factory:function(t){return new(t||Y)},imports:[[ot,ct.a,st.a,lt,dt]]}),Y)}}])}();