(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Xdgr:function(t,e,r){"use strict";r.r(e),r.d(e,"UsersPageModule",(function(){return ut}));var i=r("tyNb"),a=r("jtHE"),n=r("1G5W"),s=r("Tj/N"),o=r("0IaG"),l=r("XNiG"),c=r("fXoL"),u=r("3Pt+"),m=r("tLlE"),b=r("kmnG"),d=r("qFsG"),p=r("ofXK"),f=r("iadO");function h(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function g(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function C(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"This field required"),c.Tb())}function U(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Enter a valid email"),c.Tb())}function T(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function w(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function y(t,e){if(1&t&&(c.Ub(0,"mat-form-field",1),c.Ub(1,"mat-label"),c.Bc(2,"Enter password"),c.Tb(),c.Pb(3,"input",11),c.Ac(4,w,2,0,"mat-error",3),c.Tb()),2&t){const t=c.gc();c.Cb(4),c.mc("ngIf",t.userFormGroup.controls.password.invalid)}}var O=function(t){return t.SENDING="SENDING",t.OK="OK",t.ERROR="ERROR",t}({});let P=(()=>{class t{constructor(t,e){this.fb=t,this.http=e,this.submit=new l.a,this.result=new c.o,this.hide=!0,this.userFormGroup=this.fb.group({firstName:[null,[u.p.required,u.p.minLength(3),u.p.maxLength(30)]],lastName:[null,[u.p.required,u.p.minLength(3),u.p.maxLength(30)]],username:[null,[u.p.required,u.p.minLength(3),u.p.maxLength(20)]],email:[null,[u.p.required,u.p.email,u.p.maxLength(30)]],password:[null,[u.p.required,u.p.minLength(3),u.p.maxLength(30)]],birthDate:[null,[u.p.required]]})}get isEdit(){var t;return!!(null===(t=this.user)||void 0===t?void 0:t.id)}ngOnInit(){if(this.submit.subscribe(()=>this.isEdit?this.submitUpdate():this.submitRegister()),this.user){const t=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(r[i[a]]=t[i[a]])}return r}(this.user,["id","registerDate"]);this.userFormGroup.setControl("username",new u.d({value:this.user.username,disabled:!0})),this.userFormGroup.setValue(t),this.userFormGroup.removeControl("password")}}submitRegister(){this.userFormGroup.valid?(this.result.emit({status:O.SENDING,result:null}),this.http.create("users",this.userFormGroup.value).subscribe(t=>{setTimeout(()=>{this.result.emit({status:O.OK,result:t})},300)},()=>{setTimeout(()=>{this.result.emit({status:O.ERROR,result:null})},300)})):this.userFormGroup.markAllAsTouched()}submitUpdate(){this.userFormGroup.valid?(this.result.emit({status:O.SENDING,result:null}),this.http.update("users",this.user.id,this.userFormGroup.value).subscribe(t=>{setTimeout(()=>{this.result.emit({status:O.OK,result:t})},300)},()=>{setTimeout(()=>{this.result.emit({status:O.ERROR,result:null})},300)})):this.userFormGroup.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(u.c),c.Ob(m.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["user-form"]],inputs:{user:"user",submit:"submit"},outputs:{result:"result"},decls:35,vars:9,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"register__field"],["matInput","","formControlName","firstName","placeholder","Enter your first name","required",""],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Enter your last name","required",""],["matInput","","formControlName","birthDate","format","yyyy-MM-dd","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","email","placeholder","Enter your email","required",""],["matInput","","formControlName","username","placeholder","Enter your username","required",""],["class","register__field","appearance","fill",4,"ngIf"],["matInput","","type","password","autocomplete","off","formControlName","password","placeholder","Enter password","required",""]],template:function(t,e){if(1&t&&(c.Ub(0,"form",0),c.cc("ngSubmit",(function(){return e.isEdit?e.submitUpdate():e.submitRegister()})),c.Ub(1,"mat-form-field",1),c.Ub(2,"mat-label"),c.Bc(3,"First name"),c.Tb(),c.Pb(4,"input",2),c.Ac(5,h,2,0,"mat-error",3),c.Tb(),c.Pb(6,"br"),c.Ub(7,"mat-form-field",1),c.Ub(8,"mat-label"),c.Bc(9,"Last name"),c.Tb(),c.Pb(10,"input",4),c.Ac(11,g,2,0,"mat-error",3),c.Tb(),c.Pb(12,"br"),c.Ub(13,"mat-form-field",1),c.Ub(14,"mat-label"),c.Bc(15,"Birth Date"),c.Tb(),c.Pb(16,"input",5),c.Pb(17,"mat-datepicker-toggle",6),c.Pb(18,"mat-datepicker",null,7),c.Ac(20,C,2,0,"mat-error",3),c.Tb(),c.Pb(21,"br"),c.Ub(22,"mat-form-field",1),c.Ub(23,"mat-label"),c.Bc(24,"Email"),c.Tb(),c.Pb(25,"input",8),c.Ac(26,U,2,0,"mat-error",3),c.Tb(),c.Pb(27,"br"),c.Ub(28,"mat-form-field",1),c.Ub(29,"mat-label"),c.Bc(30,"Username"),c.Tb(),c.Pb(31,"input",9),c.Ac(32,T,2,0,"mat-error",3),c.Tb(),c.Pb(33,"br"),c.Ac(34,y,5,1,"mat-form-field",10),c.Tb()),2&t){const t=c.rc(19);c.mc("formGroup",e.userFormGroup),c.Cb(5),c.mc("ngIf",e.userFormGroup.controls.firstName.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.lastName.invalid),c.Cb(5),c.mc("matDatepicker",t),c.Cb(1),c.mc("for",t),c.Cb(3),c.mc("ngIf",e.userFormGroup.controls.birthDate.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.email.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.username.invalid),c.Cb(2),c.mc("ngIf",!e.isEdit)}},directives:[u.q,u.l,u.f,b.c,b.f,d.b,u.b,u.k,u.e,u.o,p.l,f.b,f.d,b.g,f.a,b.b],styles:["[_nghost-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;max-width:400px}[_nghost-%COMP%]   .register__field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}[_nghost-%COMP%]   .register__button-field[_ngcontent-%COMP%]{width:100%;margin-top:10px}"]}),t})();var _=r("bTqV");function v(t,e){1&t&&(c.Ub(0,"span"),c.Bc(1,"Register"),c.Tb())}function D(t,e){1&t&&(c.Ub(0,"span"),c.Bc(1,"Update"),c.Tb())}let N=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.submit=new l.a,this.formStatus=O}submitForm(){this.submit.next()}resultForm(t){this.result=t,this.result.status===this.formStatus.OK&&this.onClose(t)}onClose(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(o.g),c.Ob(o.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["nat-user-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"submit","user","result"],[1,"actions"],["mat-flat-button","","color","accent",3,"disabled","click"],[4,"ngIf"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,e){1&t&&(c.Ub(0,"h2",0),c.Bc(1,"User"),c.Tb(),c.Ub(2,"mat-dialog-content",1),c.Ub(3,"user-form",2),c.cc("result",(function(t){return e.resultForm(t)})),c.Tb(),c.Tb(),c.Ub(4,"mat-dialog-actions",3),c.Ub(5,"button",4),c.cc("click",(function(){return e.submitForm()})),c.Ac(6,v,2,0,"span",5),c.Ac(7,D,2,0,"span",5),c.Tb(),c.Ub(8,"button",6),c.Bc(9,"Close"),c.Tb(),c.Tb()),2&t&&(c.Cb(3),c.mc("submit",e.submit)("user",e.data),c.Cb(2),c.mc("disabled",(null==e.result?null:e.result.status)===e.formStatus.SENDING),c.Cb(1),c.mc("ngIf",!e.data),c.Cb(1),c.mc("ngIf",e.data))},directives:[o.h,o.e,P,o.c,_.a,p.l,o.d],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:24px}"]}),t})();var I=r("OaWH"),B=r("Xa2L");const R=["*"];let A=(()=>{class t{constructor(){this.diameter=30,this.width="auto",this.loading=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["loading"]],inputs:{diameter:"diameter",width:"width",loading:"loading"},ngContentSelectors:R,decls:5,vars:5,consts:[[1,"loading"],[1,"loading__cover"],[3,"diameter"]],template:function(t,e){1&t&&(c.lc(),c.Ub(0,"div",0),c.Ub(1,"div",1),c.Pb(2,"mat-spinner",2),c.Tb(),c.Ub(3,"div"),c.kc(4),c.Tb(),c.Tb()),2&t&&(c.zc("width",e.width),c.Cb(1),c.zc("visibility",e.loading?"visible":"hidden"),c.Cb(1),c.mc("diameter",e.diameter))},directives:[B.b],styles:[".loading[_ngcontent-%COMP%]{position:relative}.loading__cover[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:hsla(0,0%,100%,.6);z-index:1;display:flex;justify-content:center;align-items:center}"]}),t})();var x=r("+0xr"),F=r("M9IT"),S=r("NFeN");function k(t,e){1&t&&(c.Ub(0,"th",21),c.Bc(1,"No."),c.Tb())}function G(t,e){if(1&t&&(c.Ub(0,"td",22),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.id)}}function E(t,e){1&t&&(c.Ub(0,"th",21),c.Bc(1,"First Name"),c.Tb())}function M(t,e){if(1&t&&(c.Ub(0,"td",22),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.firstName)}}function L(t,e){1&t&&(c.Ub(0,"th",21),c.Bc(1,"Last Name"),c.Tb())}function j(t,e){if(1&t&&(c.Ub(0,"td",22),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.lastName)}}function q(t,e){1&t&&(c.Ub(0,"th",21),c.Bc(1,"Username"),c.Tb())}function z(t,e){if(1&t&&(c.Ub(0,"td",22),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.username)}}function $(t,e){1&t&&(c.Ub(0,"th",23),c.Bc(1,"Email"),c.Tb())}function K(t,e){if(1&t&&(c.Ub(0,"td",22),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.email)}}function H(t,e){1&t&&(c.Ub(0,"th",21),c.Bc(1,"Birth Date"),c.Tb())}function X(t,e){if(1&t&&(c.Ub(0,"td",22),c.Bc(1),c.hc(2,"date"),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(c.jc(2,1,t.birthDate,"mediumDate"))}}function V(t,e){1&t&&c.Pb(0,"th",24)}function W(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",22),c.Ub(1,"button",25),c.cc("click",(function(){c.uc(t);const r=e.$implicit;return c.gc().openEditUserDialog(r)})),c.Ub(2,"mat-icon"),c.Bc(3,"edit"),c.Tb(),c.Tb(),c.Tb()}}function J(t,e){if(1&t&&(c.Ub(0,"td",26),c.Bc(1,"No data"),c.Tb()),2&t){const t=c.gc();c.Db("colspan",t.displayedColumns.length)}}function Q(t,e){1&t&&c.Pb(0,"tr",27)}function Y(t,e){1&t&&c.Pb(0,"tr",28)}function Z(t,e){if(1&t&&c.Pb(0,"tr",29),2&t){const t=c.gc();c.Fb("hidden",t.users.length>0)}}const tt=function(){return["no-data"]},et=function(){return[5,10,25]},rt={width:"calc(100% - 32px)",maxWidth:"500px"},it=[{path:"",component:(()=>{class t{constructor(t,e,r){this.http=t,this.app=e,this.dialog=r,this.destroyed$=new a.a(1),this.users=[],this.loading=!1,this.dialogConfig=rt,this.pagination={length:0,pageSize:10,pageIndex:0}}get mobile(){return this.width<=960}get displayedColumns(){return this.mobile?["id","firstName","lastName","edit"]:["id","username","firstName","lastName","email","birthDate","edit"]}ngOnInit(){this.app.width.pipe(Object(n.a)(this.destroyed$)).subscribe(t=>this.width=t),this.getUsers()}openCreateUserDialog(){this.dialog.open(N,this.dialogConfig).afterClosed().subscribe(t=>{t&&t.status===O.OK&&this.getUsers()})}openEditUserDialog(t){this.dialog.open(N,Object.assign(Object.assign({},this.dialogConfig),{data:new s.a(t)})).afterClosed().subscribe(t=>{t&&t.status===O.OK&&this.getUsers()})}getUsers(){this.loading=!0,this.http.find("users",[{key:"size",value:this.pagination.pageSize},{key:"page",value:this.pagination.pageIndex+1}]).subscribe(t=>{setTimeout(()=>{this.users=s.a.initArray(t.body),this.pagination.length=+t.headers.get("x-total-count"),this.loading=!1},200)},()=>{this.loading=!1})}changePage(t){this.pagination=t,this.getUsers()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.a),c.Ob(I.a),c.Ob(o.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["nat-users-page"]],decls:32,vars:12,consts:[[1,"button-block"],["mat-raised-button","","color","primary",3,"click"],[3,"loading"],["mat-table","",1,"users-table","mat-elevation-z1",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","username"],["matColumnDef","email"],["mat-header-cell","","class","users-grid__email",4,"matHeaderCellDef"],["matColumnDef","birthDate"],["matColumnDef","edit"],["mat-header-cell","","class","users-table__edit-header",4,"matHeaderCellDef"],["matColumnDef","no-data"],["mat-footer-cell","","class","users-table__no-data",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],[1,"pagination-block","mat-elevation-z1",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"users-grid__email"],["mat-header-cell","",1,"users-table__edit-header"],["mat-icon-button","",3,"click"],["mat-footer-cell","",1,"users-table__no-data"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"button",1),c.cc("click",(function(){return e.openCreateUserDialog()})),c.Bc(2,"Create user"),c.Tb(),c.Tb(),c.Ub(3,"loading",2),c.Ub(4,"table",3),c.Sb(5,4),c.Ac(6,k,2,0,"th",5),c.Ac(7,G,2,1,"td",6),c.Rb(),c.Sb(8,7),c.Ac(9,E,2,0,"th",5),c.Ac(10,M,2,1,"td",6),c.Rb(),c.Sb(11,8),c.Ac(12,L,2,0,"th",5),c.Ac(13,j,2,1,"td",6),c.Rb(),c.Sb(14,9),c.Ac(15,q,2,0,"th",5),c.Ac(16,z,2,1,"td",6),c.Rb(),c.Sb(17,10),c.Ac(18,$,2,0,"th",11),c.Ac(19,K,2,1,"td",6),c.Rb(),c.Sb(20,12),c.Ac(21,H,2,0,"th",5),c.Ac(22,X,3,4,"td",6),c.Rb(),c.Sb(23,13),c.Ac(24,V,1,0,"th",14),c.Ac(25,W,4,0,"td",6),c.Rb(),c.Sb(26,15),c.Ac(27,J,2,1,"td",16),c.Rb(),c.Ac(28,Q,1,0,"tr",17),c.Ac(29,Y,1,0,"tr",18),c.Ac(30,Z,1,2,"tr",19),c.Tb(),c.Tb(),c.Ub(31,"mat-paginator",20),c.cc("page",(function(t){return e.changePage(t)})),c.Tb()),2&t&&(c.Cb(3),c.mc("loading",e.loading),c.Cb(1),c.mc("dataSource",e.users),c.Cb(24),c.mc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.mc("matRowDefColumns",e.displayedColumns),c.Cb(1),c.mc("matFooterRowDef",c.nc(10,tt)),c.Cb(1),c.Fb("mobile",e.mobile),c.mc("length",e.pagination.length)("pageSize",e.pagination.pageSize)("pageSizeOptions",c.nc(11,et)))},directives:[_.a,A,x.n,x.c,x.i,x.b,x.e,x.k,x.m,x.g,F.a,x.h,x.a,S.a,x.d,x.j,x.l,x.f],pipes:[p.e],styles:[".users-table[_ngcontent-%COMP%]{width:100%}.users-table__no-data[_ngcontent-%COMP%]{text-align:center}.users-table__edit-header[_ngcontent-%COMP%]{width:64px}.button-block[_ngcontent-%COMP%]{margin-bottom:1rem}.button-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:9px}.pagination-block[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid rgba(0,0,0,.12)}.pagination-block.mobile[_ngcontent-%COMP%]     .mat-paginator-page-size{display:none}.users-grid__email[_ngcontent-%COMP%]{width:200px}"]}),t})()}];let at=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[i.d.forChild(it)],i.d]}),t})();var nt=r("PCNd"),st=r("5dmV");let ot=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[nt.a,st.a]]}),t})(),lt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[nt.a,st.a,ot]]}),t})(),ct=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[nt.a,st.a]]}),t})(),ut=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[at,nt.a,st.a,lt,ct]]}),t})()}}]);