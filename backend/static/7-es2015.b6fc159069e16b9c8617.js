(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Xdgr:function(t,e,r){"use strict";r.r(e),r.d(e,"UsersPageModule",(function(){return at}));var a=r("tyNb"),n=r("jtHE"),i=r("1G5W"),o=r("Tj/N"),s=r("XNiG"),c=r("fXoL"),l=r("3Pt+"),m=r("tLlE"),u=r("kmnG"),b=r("qFsG"),d=r("ofXK"),f=r("iadO");function p(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function h(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function g(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"This field required"),c.Tb())}function C(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Enter a valid email"),c.Tb())}function U(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}function w(t,e){1&t&&(c.Ub(0,"mat-error"),c.Bc(1,"Please enter at least 3 characters"),c.Tb())}var T=function(t){return t.SENDING="SENDING",t.OK="OK",t.ERROR="ERROR",t}({});let y=(()=>{class t{constructor(t,e){this.formBuilder=t,this.http=e,this.submit=new s.a,this.result=new c.o,this.hide=!0,this.userFormGroup=this.formBuilder.group({firstName:[null,[l.o.required,l.o.minLength(3),l.o.maxLength(30)]],lastName:[null,[l.o.required,l.o.minLength(3),l.o.maxLength(30)]],username:[null,[l.o.required,l.o.minLength(3),l.o.maxLength(20)]],email:[null,[l.o.required,l.o.email,l.o.maxLength(30)]],password:[null,[l.o.required,l.o.minLength(3),l.o.maxLength(30)]],birthDate:[null,[l.o.required]]})}ngOnInit(){this.submit.subscribe(()=>this.submitRegister())}submitRegister(){this.userFormGroup.valid?(this.result.emit({status:T.SENDING,result:null}),this.http.create("users",this.userFormGroup.value).subscribe(t=>{setTimeout(()=>{this.result.emit({status:T.OK,result:t})},1e3)},()=>{setTimeout(()=>{this.result.emit({status:T.ERROR,result:null})},1e3)})):this.userFormGroup.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.c),c.Ob(m.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["user-form"]],inputs:{default:"default",submit:"submit"},outputs:{result:"result"},decls:39,vars:9,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"register__field"],["matInput","","formControlName","firstName","placeholder","Enter your first name","required",""],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Enter your last name","required",""],["matInput","","formControlName","birthDate","format","yyyy-MM-dd","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","email","placeholder","Enter your email","required",""],["matInput","","formControlName","username","placeholder","Enter your username","required",""],["matInput","","type","password","autocomplete","off","formControlName","password","placeholder","Enter password","required",""]],template:function(t,e){if(1&t&&(c.Ub(0,"form",0),c.cc("ngSubmit",(function(){return e.submitRegister()})),c.Ub(1,"mat-form-field",1),c.Ub(2,"mat-label"),c.Bc(3,"First name"),c.Tb(),c.Pb(4,"input",2),c.Ac(5,p,2,0,"mat-error",3),c.Tb(),c.Pb(6,"br"),c.Ub(7,"mat-form-field",1),c.Ub(8,"mat-label"),c.Bc(9,"Last name"),c.Tb(),c.Pb(10,"input",4),c.Ac(11,h,2,0,"mat-error",3),c.Tb(),c.Pb(12,"br"),c.Ub(13,"mat-form-field",1),c.Ub(14,"mat-label"),c.Bc(15,"Birth Date"),c.Tb(),c.Pb(16,"input",5),c.Pb(17,"mat-datepicker-toggle",6),c.Pb(18,"mat-datepicker",null,7),c.Ac(20,g,2,0,"mat-error",3),c.Tb(),c.Pb(21,"br"),c.Ub(22,"mat-form-field",1),c.Ub(23,"mat-label"),c.Bc(24,"Email"),c.Tb(),c.Pb(25,"input",8),c.Ac(26,C,2,0,"mat-error",3),c.Tb(),c.Pb(27,"br"),c.Ub(28,"mat-form-field",1),c.Ub(29,"mat-label"),c.Bc(30,"Username"),c.Tb(),c.Pb(31,"input",9),c.Ac(32,U,2,0,"mat-error",3),c.Tb(),c.Pb(33,"br"),c.Ub(34,"mat-form-field",1),c.Ub(35,"mat-label"),c.Bc(36,"Enter password"),c.Tb(),c.Pb(37,"input",10),c.Ac(38,w,2,0,"mat-error",3),c.Tb(),c.Tb()),2&t){const t=c.rc(19);c.mc("formGroup",e.userFormGroup),c.Cb(5),c.mc("ngIf",e.userFormGroup.controls.firstName.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.lastName.invalid),c.Cb(5),c.mc("matDatepicker",t),c.Cb(1),c.mc("for",t),c.Cb(3),c.mc("ngIf",e.userFormGroup.controls.birthDate.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.email.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.username.invalid),c.Cb(6),c.mc("ngIf",e.userFormGroup.controls.password.invalid)}},directives:[l.p,l.k,l.e,u.c,u.f,b.b,l.b,l.j,l.d,l.n,d.l,f.b,f.d,u.g,f.a,u.b],styles:["[_nghost-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;max-width:400px}[_nghost-%COMP%]   .register__field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}[_nghost-%COMP%]   .register__button-field[_ngcontent-%COMP%]{width:100%;margin-top:10px}"]}),t})();var P=r("0IaG"),O=r("bTqV");let _=(()=>{class t{constructor(t){this.dialogRef=t,this.submit=new s.a,this.formStatus=T}submitForm(){this.submit.next()}resultForm(t){this.result=t,this.result.status===this.formStatus.OK&&this.onClose(t)}onClose(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(P.f))},t.\u0275cmp=c.Ib({type:t,selectors:[["nat-user-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"submit","result"],[1,"actions"],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,e){1&t&&(c.Ub(0,"h2",0),c.Bc(1,"User"),c.Tb(),c.Ub(2,"mat-dialog-content",1),c.Ub(3,"user-form",2),c.cc("result",(function(t){return e.resultForm(t)})),c.Tb(),c.Tb(),c.Ub(4,"mat-dialog-actions",3),c.Ub(5,"button",4),c.cc("click",(function(){return e.submitForm()})),c.Bc(6,"Register"),c.Tb(),c.Ub(7,"button",5),c.Bc(8,"Close"),c.Tb(),c.Tb()),2&t&&(c.Cb(3),c.mc("submit",e.submit),c.Cb(2),c.mc("disabled",(null==e.result?null:e.result.status)===e.formStatus.SENDING))},directives:[P.g,P.d,y,P.b,O.a,P.c],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:24px}"]}),t})();var v=r("OaWH"),N=r("Xa2L");const D=["*"];let B=(()=>{class t{constructor(){this.diameter=30,this.width="auto",this.loading=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["loading"]],inputs:{diameter:"diameter",width:"width",loading:"loading"},ngContentSelectors:D,decls:5,vars:5,consts:[[1,"loading"],[1,"loading__cover"],[3,"diameter"]],template:function(t,e){1&t&&(c.lc(),c.Ub(0,"div",0),c.Ub(1,"div",1),c.Pb(2,"mat-spinner",2),c.Tb(),c.Ub(3,"div"),c.kc(4),c.Tb(),c.Tb()),2&t&&(c.zc("width",e.width),c.Cb(1),c.zc("visibility",e.loading?"visible":"hidden"),c.Cb(1),c.mc("diameter",e.diameter))},directives:[N.b],styles:[".loading[_ngcontent-%COMP%]{position:relative}.loading__cover[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:hsla(0,0%,100%,.6);z-index:1;display:flex;justify-content:center;align-items:center}"]}),t})();var R=r("+0xr"),x=r("M9IT");function I(t,e){1&t&&(c.Ub(0,"th",19),c.Bc(1,"No."),c.Tb())}function M(t,e){if(1&t&&(c.Ub(0,"td",20),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.id)}}function S(t,e){1&t&&(c.Ub(0,"th",19),c.Bc(1,"First Name"),c.Tb())}function k(t,e){if(1&t&&(c.Ub(0,"td",20),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.firstName)}}function A(t,e){1&t&&(c.Ub(0,"th",19),c.Bc(1,"Last Name"),c.Tb())}function F(t,e){if(1&t&&(c.Ub(0,"td",20),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.lastName)}}function G(t,e){1&t&&(c.Ub(0,"th",19),c.Bc(1,"Username"),c.Tb())}function L(t,e){if(1&t&&(c.Ub(0,"td",20),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.username)}}function E(t,e){1&t&&(c.Ub(0,"th",21),c.Bc(1,"Email"),c.Tb())}function q(t,e){if(1&t&&(c.Ub(0,"td",20),c.Bc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(t.email)}}function z(t,e){1&t&&(c.Ub(0,"th",19),c.Bc(1,"Birth Date"),c.Tb())}function j(t,e){if(1&t&&(c.Ub(0,"td",20),c.Bc(1),c.hc(2,"date"),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Cc(c.jc(2,1,t.birthDate,"dd.MM.yyyy"))}}function $(t,e){1&t&&(c.Ub(0,"td",22),c.Bc(1,"No data"),c.Tb())}function H(t,e){1&t&&c.Pb(0,"tr",23)}function K(t,e){1&t&&c.Pb(0,"tr",24)}function X(t,e){if(1&t&&c.Pb(0,"tr",25),2&t){const t=c.gc();c.Fb("hidden",t.users.length>0)}}const W=function(){return["no-data"]},J=function(){return[5,10,25]},V=[{path:"",component:(()=>{class t{constructor(t,e,r){this.http=t,this.app=e,this.dialog=r,this.destroyed$=new n.a(1),this.users=[],this.loading=!1,this.pagination={length:0,pageSize:10,pageIndex:0}}get mobile(){return this.width<=960}get displayedColumns(){return this.mobile?["id","firstName","lastName"]:["id","username","firstName","lastName","email","birthDate"]}ngOnInit(){this.app.width.pipe(Object(i.a)(this.destroyed$)).subscribe(t=>this.width=t),this.getUsers()}openUserDialog(){this.dialog.open(_,{width:"calc(100% - 32px)",maxWidth:"500px"}).afterClosed().subscribe(t=>{t&&t.status===T.OK&&this.getUsers()})}getUsers(){this.loading=!0,this.http.find("users",[{key:"size",value:this.pagination.pageSize},{key:"page",value:this.pagination.pageIndex+1}]).subscribe(t=>{setTimeout(()=>{this.users=o.a.initArray(t.body),this.pagination.length=+t.headers.get("x-total-count"),this.loading=!1},200)},()=>{this.loading=!1})}changePage(t){this.pagination=t,this.getUsers()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.a),c.Ob(v.a),c.Ob(P.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["nat-users-page"]],decls:29,vars:12,consts:[[1,"button-block"],["mat-raised-button","","color","primary",3,"click"],[3,"loading"],["mat-table","",1,"users-table","mat-elevation-z1",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","username"],["matColumnDef","email"],["mat-header-cell","","class","users-grid__email",4,"matHeaderCellDef"],["matColumnDef","birthDate"],["matColumnDef","no-data"],["mat-footer-cell","","colspan","6","class","users-table__no-data",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],[1,"pagination-block","mat-elevation-z1",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"users-grid__email"],["mat-footer-cell","","colspan","6",1,"users-table__no-data"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"button",1),c.cc("click",(function(){return e.openUserDialog()})),c.Bc(2,"Create user"),c.Tb(),c.Tb(),c.Ub(3,"loading",2),c.Ub(4,"table",3),c.Sb(5,4),c.Ac(6,I,2,0,"th",5),c.Ac(7,M,2,1,"td",6),c.Rb(),c.Sb(8,7),c.Ac(9,S,2,0,"th",5),c.Ac(10,k,2,1,"td",6),c.Rb(),c.Sb(11,8),c.Ac(12,A,2,0,"th",5),c.Ac(13,F,2,1,"td",6),c.Rb(),c.Sb(14,9),c.Ac(15,G,2,0,"th",5),c.Ac(16,L,2,1,"td",6),c.Rb(),c.Sb(17,10),c.Ac(18,E,2,0,"th",11),c.Ac(19,q,2,1,"td",6),c.Rb(),c.Sb(20,12),c.Ac(21,z,2,0,"th",5),c.Ac(22,j,3,4,"td",6),c.Rb(),c.Sb(23,13),c.Ac(24,$,2,0,"td",14),c.Rb(),c.Ac(25,H,1,0,"tr",15),c.Ac(26,K,1,0,"tr",16),c.Ac(27,X,1,2,"tr",17),c.Tb(),c.Tb(),c.Ub(28,"mat-paginator",18),c.cc("page",(function(t){return e.changePage(t)})),c.Tb()),2&t&&(c.Cb(3),c.mc("loading",e.loading),c.Cb(1),c.mc("dataSource",e.users),c.Cb(21),c.mc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.mc("matRowDefColumns",e.displayedColumns),c.Cb(1),c.mc("matFooterRowDef",c.nc(10,W)),c.Cb(1),c.Fb("mobile",e.mobile),c.mc("length",e.pagination.length)("pageSize",e.pagination.pageSize)("pageSizeOptions",c.nc(11,J)))},directives:[O.a,B,R.n,R.c,R.i,R.b,R.e,R.k,R.m,R.g,x.a,R.h,R.a,R.d,R.j,R.l,R.f],pipes:[d.e],styles:[".users-table[_ngcontent-%COMP%]{width:100%}.users-table__no-data[_ngcontent-%COMP%]{text-align:center}.button-block[_ngcontent-%COMP%]{margin-bottom:1rem}.button-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:9px}.pagination-block[_ngcontent-%COMP%]{margin-top:1rem;border-bottom:1px solid rgba(0,0,0,.12)}.pagination-block.mobile[_ngcontent-%COMP%]     .mat-paginator-page-size{display:none}.users-grid__email[_ngcontent-%COMP%]{width:200px}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[a.d.forChild(V)],a.d]}),t})();var Y=r("PCNd"),Z=r("5dmV");let tt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[Y.a,Z.a]]}),t})(),et=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[Y.a,Z.a,tt]]}),t})(),rt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[Y.a,Z.a]]}),t})(),at=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[Q,Y.a,Z.a,et,rt]]}),t})()}}]);